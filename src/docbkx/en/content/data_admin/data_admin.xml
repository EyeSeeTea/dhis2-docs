<?xml version='1.0' encoding='UTF-8'?>
<chapter version="5.0"
  xsi:schemaLocation="http://docbook.org/ns/docbook http://www.docbook.org/xml/5.0/xsd/docbook.xsd"
  xmlns="http://docbook.org/ns/docbook" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xl="http://www.w3.org/1999/xlink"
  xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xhtml="http://www.w3.org/1999/xhtml"
  xmlns:svg="http://www.w3.org/2000/svg" xmlns:mth="http://www.w3.org/1998/Math/MathML"
  xmlns:db="http://docbook.org/ns/docbook" xml:id="data_admin">
  <title><?oxy_comment_start author="cecilia" timestamp="20161010T104310+0200" comment="This seciton needs a full editorial review and restructure."?>Data<?oxy_comment_end?>
    <?oxy_comment_start author="cecilia" timestamp="20161010T094352+0200" comment="Removed data browser section for 2.25, functionality removed from system." flag="done"?>Administration<?oxy_comment_end?></title>
  <para>The data administration module provides a range of functions to ensure that the data stored
    in the DHIS2 database is integral and that the database performance is optimised. These
    functions should be executed on a regular basis by a data administrator to ensure that the
    quality of the data stored is optimal. </para>
  <section xml:id="dataAdmin_dataIntegrity">
    <title>Data integrity</title>
    <para>DHIS2 can perform a wide range of data integrity checks on the data contained in the
      database. Identifying and correcting data integrity issues is extremely important for ensuring
      that the data used for analysis purposes is valid. Each of the data integrity checks that are
      performed by the system will be described, along with general procedures that can be performed
      to resolve these issues. </para>
    <section>
      <title>Data elements without data set</title>
      <para>Each data element must be assigned to a data set. Values for data elements will not be
        able to be entered into the system if a data element is not assigned to a data set. Choose
        Maintenance-&gt;Datasets-&gt;Edit from the main menu and then add the &quot;orphaned&quot;
        data element to the appropriate data set. </para>
    </section>
    <section>
      <title>Data elements without groups</title>
      <para>Some Data Elements have been allocated to several Data Element Groups. This is currently
        not allowed, because it will result in duplication of linked data records in the analytics
        record sets that provide aggregated data. Go to Maintenance -&gt; Data Element Groups to
        review each Data Element identified and remove the incorrect Group allocations.</para>
    </section>
    <section>
      <title>Data elements violating exclusive group sets</title>
      <para> Some data elements have been allocated to several data element groups that are members
        of the same data element group set. All group sets in DHIS2 are defined as exclusive, which
        means that a data element can <emphasis>only</emphasis> be allocated to
          <emphasis>one</emphasis> data element group within that group set. Go to Maintenance -&gt;
        Data elements and indicators -&gt;Data element groups to review each data element identified
        in the integrity check. Either remove the data element from all groups except the one that
        it should be allocated to, or see if one of the groups should be placed in a different group
        set. </para>
    </section>
    <section>
      <title>Data elements in data set but not in form or sections</title>
      <para>Data elements have been assigned to a data set, but have not been assigned to any
        sections of the data set forms. All data sets which use section forms, should generally have
        all data elements in the data set assigned to exactly one section of the dataset. </para>
    </section>
    <section>
      <title>Data elements assigned to data sets with different period types</title>
      <para>Data elements should not be assigned to two separate data sets whose period types
        differ. The recommended approach would be to create two separate data elements (for instance
        a monthly and yearly data element) and assign these to respective datasets. </para>
    </section>
    <section>
      <title>Data sets not assigned to organisation units</title>
      <para>All data sets should be assigned to at least one organisation unit. </para>
    </section>
    <section>
      <title>Sections with invalid category combinations </title>
      <para>Data sets which use section forms should only have a single category combination within
        each section. This violation could result from assigning a data element to a section, but
        then changing the category combination of this data element at a later point in time.
      </para>
    </section>
    <section>
      <title>Indicators with identical formulas</title>
      <para>Although this rule will not affect data quality, it generally does not make sense to
        have two indicators with the exact same definition. Review the identified indicators and
        their formulas and delete or modify any indicator that appears to be the duplicate.</para>
    </section>
    <section>
      <title>Indicators without groups</title>
      <para>All data elements and indicators must be assigned to at least one group, so these
        Indicators need to be allocated to their correct Data Element and Indicator Group. From the
        main menu, go to Data elements/Indicators -&gt; Indicator Groups, and allocate each of the
        `Orphaned` indicators to its correct group.</para>
    </section>
    <section>
      <title>Invalid indicator numerators</title>
      <para>Violations of this rule may be caused by an incorrect reference to a deleted or modified
        data element. Review the indicator and make corrections to the numerator definition. </para>
    </section>
    <section>
      <title>Invalid indicator denominators</title>
      <para>Violations of this rule may be caused by an incorrect reference to a deleted or modified
        data element. Review the indicator and make corrections to the denominator definition.
      </para>
    </section>
    <section>
      <title>Indicators violating exclusive group sets</title>
      <para> Some indicators have been allocated to several indicator groups that are members of the
        same indicator group set. All group sets in DHIS2 are defined as exclusive, which means that
        an indicator can <emphasis>only</emphasis> be allocated to <emphasis>one</emphasis>
        indicator group within that group set. Go to Maintenance -&gt; Data elements and indicators
        -&gt;Indicator groups to review each indicator identified in the integrity check. Either
        remove the indicator from all groups except the one that it should be allocated to, or see
        if one of the groups should be placed in a different group set. </para>
    </section>
    <section>
      <title>Duplicate periods</title>
      <para>If periods have been imported from external applications, it may be possible that some
        periods will be duplicated. If you have any periods which appear to be duplicated here, you
        will need to resolve these directly in the DHIS2 database. All data which has been assigned
        to the duplicated period, should be moved to the correct period, and the duplicate period
        should be removed. </para>
    </section>
    <section>
      <title> Organisation units with cyclic references</title>
      <para>Organisation units cannot be both parent and children of each other, directly nor
        indirectly. If this situation occurs, you will need to resolve the cyclic reference directly
        in the DHIS2 database in the &quot;organisation unit&quot; table, by reassigning the
        &quot;parentid&quot; field of the organisation units. </para>
    </section>
    <section>
      <title>Orphaned organisation units</title>
      <para>All organisation units must exist within the organisation unit hierarchy. Go to
        Organisation- units &gt;Hierarchy Operations and move the offending organisation unit into
        the proper position in the hierarchy. </para>
    </section>
    <section>
      <title>Organisation units without groups</title>
      <para>All organisation units <emphasis>must</emphasis> be allocated to at least
          <emphasis>one</emphasis> group. The problem might either be that you have not defined any
        compulsory OrgUnit Group Set at all, or that there are violations of the compulsory rule for
        some OrgUnits . NOTE: If you have defined no compulsory OrgUnit Group Sets, then you must
        first define them by going to Organisation units-&gt;Organisation unit group sets and define
        at least one compulsory Group Set (the group set &apos;Type&apos; are nearly universally
        relevant). If you have the relevant group sets, go to Maintenance -&gt; OrgUnit Groups to
        review each OrgUnit identified and add the relevant Group allocation.</para>
    </section>
    <section>
      <title>Organisation units violating compulsory group sets</title>
      <para>These organisation units have not been assigned to the any organisation unit group
        within one of the <emphasis>compulsory</emphasis> organisation unit group sets. When a group
        set is defined as compulsory, it means that an organisation unit must be allocated to at
        least one organisation unit group within that group set. For instance, all organisation
        units must belong to one of the groups in the &apos;Type&apos; group set. It might belong to
        the `Hospital` or the `Clinic` or any other &apos;type&apos; group - but it must belong to
        exactly one of them. Go to Organisation units-&gt;Organisation unit groups to review each
        organisation unit identified in the integrity check. Allocate all organisation units to
        exactly one compulsory group. </para>
    </section>
    <section>
      <title>Organisation units violating exclusive group sets</title>
      <para>Some organisation units have been allocated to several organisation unit groups that are
        members of the same organisation unit group set. All group sets in DHIS2 are defined as
        exclusive, which means that an organisation unit can <emphasis>only</emphasis> be allocated
        to <emphasis>one</emphasis> organisation unit group within that Group Set. For instance, one
        organisation unit cannot normally belong to the both the &apos;Hospital&apos; and
        &apos;Clinic&apos; groups , but rather to only to one of them. Go to Organisation
        unit-&gt;Organisation unit groups to review each organisation unit identified in the
        integrity check. Remove the organisation units from all groups except the one that it should
        be allocated to.</para>
    </section>
    <section>
      <title> Organisation unit groups without group sets</title>
      <para>The organisation unit groups listed here have not been allocated to a group set. Go to
        Maintenance-&gt;Organisation unit-&gt;Organisation unit group sets and allocate the
        Organisation unit group to the appropriate group set. </para>
    </section>
    <section>
      <title>Validation rules without
        <?oxy_comment_start author="cecilia" timestamp="20170127T154109+0100" comment="At next revision, review content, maybe move to Maintenance section"?>groups<?oxy_comment_end?></title>
      <para>All validation rules must be assigned to a group. Go to <emphasis role="bold"
          >Maintenance</emphasis> app > <emphasis role="bold">Validation rule group</emphasis> and
        assign the offending validation rule to a group.</para>
    </section>
    <section>
      <title>Invalid validation rule
        <?oxy_comment_start author="cecilia" timestamp="20170127T154115+0100" comment="At next revision, review content, maybe move to Maintenance section"?>left<?oxy_comment_end?>
        side expressions</title>
      <para>An error exists in the left-side validation rule definition. Go to <emphasis role="bold"
          >Maintenance</emphasis> app > <emphasis role="bold">Validation rule</emphasis> and click
          <emphasis role="bold">Edit</emphasis> on the offending rule. Click <emphasis role="bold"
          >Left side</emphasis> and make the required corrections.</para>
    </section>
    <section>
      <title>Invalid validation rule
        <?oxy_comment_start author="cecilia" timestamp="20170127T154121+0100" comment="At next revision, review content, maybe move to Maintenance section"?>right<?oxy_comment_end?>
        side expressions</title>
      <para>An error exists in the right-side validation rule definition. Go to <emphasis
          role="bold">Maintenance</emphasis> app > <emphasis role="bold">Validation rule</emphasis>
        and click <emphasis role="bold">Edit</emphasis> on the offending rule. Click <emphasis
          role="bold">Right side</emphasis> and make the required corrections.</para>
    </section>
  </section>
  <section xml:id="data_admin_maintenance">
    <title>Maintenance</title>
    <table frame="all">
      <title>Data maintenance functions in the Data Administration app</title>
      <tgroup cols="2">
        <colspec colname="c1" colnum="1" colwidth="1.0*"/>
        <colspec colname="c2" colnum="2" colwidth="1.0*"/>
        <thead>
          <row>
            <entry>
              <para>Function</para>
            </entry>
            <entry>
              <para>Description</para>
            </entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry>
              <para>Clear analytics tables</para>
            </entry>
            <entry>
              <para>Completely empties the analytics tables. These tables are used to generate
                aggregate data for the pivot tables, GIS and reports. </para>
            </entry>
          </row>
          <row>
            <entry>
              <para>Remove zero data values</para>
            </entry>
            <entry>
              <para>Removes zero data values from the database. Values registered for data elements
                with aggregation operator average is not removed, as such values will be significant
                when aggregating the data, contrary to values registered for data elements with
                aggregation operator sum. </para>
              <para>Reducing the number of data values will improve system performance.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>Permanently remove soft deleted data values</para>
            </entry>
            <entry>
              <para>When a data value is deleted in DHIS2, the system will mark the corresponding
                database row as deleted, and not actually delete the row. </para>
              <para>Running this maintenance function will physically remove these data value rows
                from the database.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>Prune periods</para>
            </entry>
            <entry>
              <para>Removes all periods which have no registered data values. Reducing the number of
                periods will improve system performance.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>Remove expired invitations</para>
            </entry>
            <entry>
              <para>Will delete users which represent user account invitations that now have gone
                past their expiry date.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>Drop SQL views</para>
            </entry>
            <entry>
              <para>DHIS2 lets you set up and manage SQL views as system objects with corresponding
                database SQL views.</para>
              <para>Running this maintenance function will drop underlying SQL views for all system
                views. Use the <emphasis role="bold">Create SQL views</emphasis> function to
                recreate these SQL views.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>Create SQL views</para>
            </entry>
            <entry>
              <para>Recreates all SQL views in the database.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>Update category option combinations</para>
            </entry>
            <entry>
              <para>Rebuilds the category option combinations. This may be required after altering
                the category options which belong to a given category. </para>
            </entry>
          </row>
          <row>
            <entry>
              <para>Update organisation unit paths</para>
            </entry>
            <entry>
              <para>The organisation unit table in the DHIS2 database has a column "path" which
                contains a concatenated string of all ancestors in the hierarchy for each
                organisation unit. </para>
              <para>Running this maintenance function will update and ensure that these values are
                in sync with the current organisation unit hierarchy. This column is managed by
                DHIS2, but a manual update might be useful when doing data loading directly in the
                database.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>Clear application cache</para>
            </entry>
            <entry>
              <para>Clears the system cache.</para>
            </entry>
          </row>
          <row>
            <entry>
              <para>Reload apps</para>
            </entry>
            <entry>
              <para>Manually reloads and detects installed DHIS2 apps.</para>
              <para>The installed apps are also detected when the system starts and when installing
                or uninstall apps.</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </table>
  </section>
  <section xml:id="dataAdmin_resourceTables">
    <title>Resource tables</title>
    <para>Resource tables are supporting tables that are used during analysis of data. One would
      typically join the contents of these tables with the data value table when doing queries from
      third-party applications like Microsoft Excel. They are also used extensively by the analysis
      modules of DHIS2. Regeneration of the resource tables should only be done once all data
      integrity issues are resolved. The resource tables are also generated automatically, every
      time the analytics process is run by the system. </para>
    <itemizedlist>
      <listitem>
        <para>Organisation unit structure (_orgunitstructure)</para>
        <para>This table should be regenerated any time there have been any changes made to the
          organisational unit hierarchy. This table provides information about the organisation unit
          hierarchy. It has one row for each organisation unit, one column for each organisation
          unit level and the organisation unit identifiers for all parents in the lineage as
          values.</para>
      </listitem>
      <listitem>
        <para>Data element group set structure (_dataelementgroupsetstructure)</para>
        <para>This table provides information about which data elements are members of which data
          element group sets. The table has one row for each data element, one column for each data
          element group set and the names of the data element group as values.</para>
      </listitem>
      <listitem>
        <para>Indicator group set structure (_indicatorgroupsetstructure)</para>
        <para>This table provides information about which indicators are members of which indicator
          group sets. The table has one row for each indicator, one column for each indicator group
          set and the names of the indicator group as values.</para>
      </listitem>
      <listitem>
        <para>Organisation unit group set structure (_organisationunitgroupsetstructure)</para>
        <para>This table provides information about which organisation units are members of which
          organisation unit group sets. The table has one row for each organisation unit, one column
          for each organisation unit group set and the names of the organisation unit groups as
          values.</para>
      </listitem>
      <listitem>
        <para>Category structure (_categorystructure)</para>
        <para>This table provides information about which data elements are members of which
          categories. The table has one row for each data element, one column for each category and
          the names of the category options as values.</para>
      </listitem>
      <listitem>
        <para>Data element category option combo name (_categoryoptioncomboname)</para>
        <para>This table should be regenerated any time there have been changes made to the category
          combination names. It contains readable names for the various combinations of
          categories.</para>
      </listitem>
      <listitem>
        <para>Data element structure (_dataelementstructure)</para>
        <para>This table provides information about all data elements and which period type
          (frequency) they capture data at. The period type is determined through the data set
          membership and hence relies on data elements to be member of data sets with similar period
          types to have a defined behavior.</para>
      </listitem>
      <listitem>
        <para>Period structure (_dataperiodstructure)</para>
        <para>This table provides information about all periods and which period type they are
          associated with. For each period type with lower frequency than itself, it contains
          information about which period it will fall within.</para>
      </listitem>
      <listitem>
        <para>Data element category option combinations (_dataelementcategoryoptioncombo)</para>
        <para>This table provides a mapping between data elements and all possible category option
          combinations. </para>
      </listitem>
    </itemizedlist>
  </section>
  <section xml:id="dataAdmin_duplicateDataElimination">
    <title>Duplicate data elimination</title>
    <para>This function is useful when data has been entered mistakenly for two data elements which
      represents the same phenomena.</para>
    <para>Start by selecting the data element to eliminate from the list and click confirm. Then
      select the data element to keep and click confirm again. Finally, verify the selection and
      click merge.</para>
    <para>In the situation where data exists for the data element to eliminate and not for the one
      to keep, the data will be moved to the one to keep. When data exists for both data elements,
      the data which was updated last will be used. When data exists only for the one to keep, no
      action will be taken. The data element to eliminate will eventually be deleted, except when it
      is a multidimensional data element and has other data registered.</para>
  </section>
  <section xml:id="dataAdmin_dataStatistics">
    <title>Data statistics</title>
    <para>The data statistics module provides an overview of the number of objects stored in the
      DHIS2 database. </para>
    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata width="60%" fileref="resources/images/maintainence/data_stats.png" format="PNG"
            align="center"/>
        </imageobject>
      </mediaobject>
    </screenshot>
    <para>The total number of each type of object is presented in a series of tables with summary
      statistics of each object. </para>
  </section>
  <section xml:id="dataAdmin_lockException">
    <title>Lock exceptions</title>
    <para>Lock exceptions provide fine-grained control over exemption from a locked data set. After
      the expiry of the data set, data entry will be denied by default, unless an exception has been
      granted through the Lock exception interface. To enable a lock exception, select the desired
      organization units, data sets, and time period and press &quot;Add&quot;. By granting a lock
      exception, data entry will be enabled even after the expiry period of the data set has passed. </para>
    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata width="50%" align="center"
            fileref="resources/images/maintainence/create_lock_exception.png"/>
        </imageobject>
      </mediaobject>
    </screenshot>
    <para>In the example above, a data lock exception would be created for &quot;ab Abundant Life
      Organization&quot; and &quot;ab Seventh Day Hospital&quot; for the &quot;Care and
      Support&quot; dataset for &quot;February 2012&quot;. </para>
  </section>
  <section xml:id="dataAdmin_minMaxValueGeneration">
    <title>Min-Max Value Generation</title>
    <para>This administrative function can be used to generate min-max values, which are used as
      part of the data quality and validation process for specific organization units and data sets.
      Simply select the dataset from the left hand frame, and then select the required organisation
      units to generate the min-max values for from the organisational units selector on the right.
      Press the &quot;Generate&quot; button to generate or regenerate all min-max values. Press
      &quot;Remove&quot; to remove all min-max values which are currently stored in the database. </para>
    <para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata width="80%" align="center"
              fileref="resources/images/maintainence/min_max_value_generation.PNG"/>
          </imageobject>
        </mediaobject>
      </screenshot>
    </para>
  </section>
  <section xml:id="dataAdmin_cacheStatistics">
    <title>Cache Statistics </title>
    <para>This option is for system administrators only to use. The cache statistics shows the
      status of the application level cache. The application level cache refers to the objects and
      query results that the application is caching in order to speed up performance. If the
      database has been modified directly the application cache needs to be cleared for it to take
      effect.</para>
  </section>
  <section xml:id="dataAdmin_scheduling">
    <title>Scheduling</title>
    <para>The Scheduler is an application for managing background jobs in DHIS2. Background jobs
      can do a number of tasks, such as running analytics, synchronizing data and meta data, or sending
      a push analysis report. The application provides the ability to create, modify and delete
      such jobs.</para>
    <para>The Scheduler comes bundled with DHIS2 and is accessed through the App Menu.</para>
    <para>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata width="80%" align="center"
              fileref="resources/images/scheduler/overview.png"/>
          </imageobject>
        </mediaobject>
      </screenshot>
    </para>
    <para>The start page of the Scheduler app shows an overview of existing jobs. By default, pre-defined
      system jobs are hidden. To view these, toggle <emphasis role="bold">Show system jobs</emphasis> in the
      top right corner.</para>
    <para>When you create or modify a job, it will be rescheduled according to selected preferences. To run
      a job on demand, press the green triangle labeled "Run now". This action is only available for enabled
      jobs.</para>
    <section xml:id="dataAdmin_scheduling_config">
      <title>Creating a job</title>
      <para>
        <orderedlist>
          <listitem>
            <para>Open the <emphasis role="bold">Scheduler</emphasis> app and click the add button in the
              bottom right corner.</para>
          </listitem>
          <listitem>
            <para>Choose a suitable <emphasis role="bold">Name</emphasis> for the new job.</para>
          </listitem>
          <listitem>
            <para>Select a running frequency for the job, i.e. when and how often the job should run.</para>
            <orderedlist>
              <listitem>
                <para>You can either select a pre-defined frequency from the dropdown-menu, or ...</para>
              </listitem>
              <listitem>
                <para>You can give the job a custom <emphasis role="bold">Cron expression</emphasis> if you
                want a specific schedule, using the <link xl:href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html">
                Spring scheduling</link> syntax.</para>
              </listitem>
              <listitem>
                <para>Enabling the <emphasis role="bold">Continuous execution</emphasis> option will make
                  the job run constantly. In other words, as soon as the job finishes, it will be scheduled to
                  run again right away. Selecting this option will disable the other fields.</para>
              </listitem>
            </orderedlist>
          </listitem>
          <listitem>
            <para>Select the <emphasis role="bold">Job type</emphasis> you want to schedule using the
              dropdown-menu.</para>
          </listitem>
          <listitem>
            <para>If the job type is customizable, a <emphasis role="bold">Parameters</emphasis> section will
              appear below. These additional options specify the details of the scheduled job, and will vary 
              greatly depending on the job type.</para>
          </listitem>
          <listitem>
            <para>Press the <emphasis role="bold">Add job</emphasis> button to confirm the job
              creation. The newly created job should now be listed in the job overview, given that
              the <emphasis role="bold">Show system jobs</emphasis> setting is not enabled.</para>
          </listitem>
        </orderedlist>
      </para>
      <para>
        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata width="80%" align="center"
                fileref="resources/images/scheduler/add_new_job.png"/>
            </imageobject>
          </mediaobject>
        </screenshot>
      </para>
      <para>Jobs are enabled by default.</para>
    </section>
    <section xml:id="dataAdmin_scheduler_config">
      <title>Configuring a job</title>
      <para>With the proper permissions, you can modify the details of user-created jobs. Note that for
        system jobs, only the schedule (cron expression) can be changed.</para>
      <para>To quickly enable or disable a user created job from running, use the <emphasis role="bold">Enabled</emphasis>
        column on the landing page of the Scheduler app. System jobs are always enabled.</para>
      <para>Further configuring a job:</para>
      <para>
        <orderedlist>
          <listitem>
            <para>Select a job from the landing page to unveil the <emphasis role="bold">Attributes</emphasis>
              and change them to accordingly. See the previous section for scheduling details.</para>
            </listitem>
            <listitem>
              <para>If the job type supports extra options, the <emphasis role="bold">Parameters</emphasis> section
                will also be available.</para>
            </listitem>
            <listitem>
              <para>When done, press the <emphasis role="bold">Save changes</emphasis> button to persist the
                changes.</para>
            </listitem>
        </orderedlist>
        </para>
    </section>
    <section xml:id="dataAdmin_scheduler_delete">
      <title>Deleting a job</title>
      <para>
        <orderedlist>
          <listitem><para>Select the job you want to delete.</para></listitem>
          <listitem><para>Press the <emphasis role="bold">Delete</emphasis> button in the bottom right corner.</para></listitem>
          <listitem><para>Confirm by pressing <emphasis role="bold">Delete</emphasis> again in the popup window.</para></listitem>
        </orderedlist>
      </para>
      <para>
        <screenshot>
          <mediaobject>
            <imageobject>
              <imagedata width="80%" align="center"
                fileref="resources/images/scheduler/delete_job.png"/>
            </imageobject>
          </mediaobject>
        </screenshot>
      </para>
    </section>
  </section>
  <section xml:id="dataAdmin_dataSync">
    <title>Data synchronization</title>
    <para>DHIS2 provides synchronisation of data between remotely distributed instances and a
      central instance of DHIS2. This can be useful e.g. when you have deployed multiple stand-alone
      instances of DHIS2 which are required to submit data values to a central DHIS2 instance. Both
      tracker data and aggregate data synchronisation is supported..</para>
    <para>These are the steps to enable data synchronization:<itemizedlist>
        <listitem>
          <para>Go to Synchronization Settings, enter the remote server URL, username and password.
            Press the TAB button to automatically save the new password. Refresh the page and check
            that the filled values are still present. Note that the password field will be empty
            after the refresh, since this value is encrypted, so you can consider it saved.
          </para>
        </listitem>
        <listitem>
          <para>Using the Scheduler app, create a new job using the "Program Data Synchronization".
            Make sure it is enabled when you finish.</para>
        </listitem>
      </itemizedlist></para>
    <para>Some aspects of the data synchronization feature to be aware of:<itemizedlist>
        <listitem>
          <para>The local DHIS2 instance will store the password of the user account on the remote
            instance encrypted in the local database. The remote account is used for authentication
            when transferring data. For security purposes make sure you set the
            &quot;enryption.password&quot; configuration parameter in hibernate.properties to a
            strong password.</para>
        </listitem>
        <listitem>
          <para>Deploying the remote server on SSL/HTTPS is strongly recommended as the username and
            password are sent in clear text using basic authentication and could be intercepted by
            an attacker.</para>
        </listitem>
        <listitem>
          <para>The data synchronization uses the UID property of data elements, category option
            combos and organisation units to match the meta-data. Hence the synchronization is
            dependent on these three meta-data objects being harmonized on the local and remote
            instance in order to work appropriately.</para>
        </listitem>
        <listitem>
          <para>The first time DHIS2 runs the synchronization job, it will include any data
            available. The subsequent synchronization jobs will only include data added and changed
            since the last successfull job. A synchronization job is considered successful only if
            all the data was saved successfully on the remote server (Any data successfully synced
            will remain on the receiving instance, regardless if the job eventually fails). Whether
            the job was successful or not can be decided from the import summary returned from the
            central server.</para>
        </listitem>
        <listitem>
          <para>The initial synchronization job may take a significant amount of time, possibly
            slowing down your instance, depending on how much data is being synchronized. It could
            be a good idea to configure the job to run when there are few online users, then later
            change this to your own preference. </para>
          <para>When DHIS2 synchronises tracker data, it determines the set of data to synchronise
            based on the last time it was synchronised. Each of the tracked entity instances and
            events have their own records of when they where last successfully synchronised.</para>
        </listitem>
        <listitem>
          <para>The system will start a synchronization job based on the rules set in the
            configuration of the job. If the synchronization job starts while there is no connection
            to the remote server, it will retry up to three times before it aborts. The job will run
            again at a scheduled time.</para>
        </listitem>
        <listitem>
          <para>The server handles each set of programs separately, which means one set of programs
            can be synchronized successfully, while the other fails. The failure or success of one
            doesn't influence the other, as the last successful synchronization time is tracked
            individually for each item as previously mentioned.</para>
        </listitem>
        <listitem>
          <para>The attributes of TrackedEntityInstances (TrackedEntityAttribute) and the data
            elements of ProgramStages (ProgramStageDataElement) which have an option "Skip
            synchronization" turned on will not be synchronized. This feature allows you to decide
            to not synchronize some sensitive or not relevant data and to keep them only
            locally.</para>
        </listitem>
      </itemizedlist></para>
  </section>
  <section xml:id="dataAdmin_metaDataSync">
    <title>Metadata Synchronization
      <?oxy_comment_start author="cecilia" timestamp="20160704T115331+0200" comment="2.24: Removed xml:id tag Metadata Synchronization
Linking between files doesn&apos;t work."?>Scheduling<?oxy_comment_end?></title>
    <para>DHIS2 provides a feature for synchronizing meta data from a remote instance to a local
      instance of DHIS2. This can be useful when you have deployed multiple stand-alone instances of
      DHIS2 and you need to create meta data in all the local instances similar to the central DHIS2
      instance.</para>
    <para>These are the steps to enable meta data synchronization:</para>
    <itemizedlist>
      <listitem>
        <para>Go to Settings &gt; Synchronization, enter the remote server URL, username and
          password and click Save.</para>
      </listitem>
      <listitem>
        <para>Go to Metadata administration &gt; Scheduling. Under Metadata synchronization set
          strategy to Enabled, select the time-period and click Start.</para>
      </listitem>
    </itemizedlist>
    <para>Some aspects of the meta data synchronization feature to be aware of:</para>
    <itemizedlist>
      <listitem>
        <para>The local DHIS2 instance will store the password of the user account of the remote
          instance in its database. The remote user account is used for authentication when
          transferring/downloading data. For security purposes make sure you set the
          &quot;encryption.password&quot; configuration parameter in hibernate.properties to a
          strong password.</para>
      </listitem>
      <listitem>
        <para>Deploying the remote server on SSL/HTTPS is strongly recommended as the username and
          password are sent in clear text using basic authentication and could be intercepted by an
          attacker.</para>
      </listitem>
      <listitem>
        <para>Also ensure that the remote user is not having ALL authority, instead simply create a
          user with F_METADATA_MANAGE authority so that even if these details are intercepted by a
          hacker, one cannot have full control of the remote system.</para>
      </listitem>
      <listitem>
        <para>The meta data synchronization relies on the underlying import layer. Each meta data
          version is an export of meta data between two given timestamps. Each sync of meta data
          version is an attempt to import that meta data snapshot into the local instance. The sync
          of versions is incremental. The local instance will try to download the meta data versions
          from the central instance one after the other. Failure to sync a specific meta data
          version will not let the sync proceed to further versions. In case of failures,
          appropriate changes must be made to meta data at central to ensure that the error gets
          resolved. Metadata configuration is critical and the configurator should be careful while
          rolling out the updates to the production. It&apos;s always recommended to have staging
          environments in place to ensure the sanity of the meta data versions and their impact
          thereafter. The local instance will sync the meta data from first version so that harmony
          is maintained and local and central instance will work appropriately.</para>
      </listitem>
      <listitem>
        <para>The system will attempt a synchronization at the scheduled time. If the local or
          remote server does not have a working Internet connection at the time, the synchronization
          will be aborted and re-attempted after as per the retry count as mentioned in the
          dhis.conf file.</para>
      </listitem>
      <listitem>
        <para>You can see the time of last successful synchronization with remote server in the
          scheduling screen next to the &quot;Last success&quot; label.</para>
      </listitem>
    </itemizedlist>
  </section>
</chapter>
